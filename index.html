<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Couple Diary</title>
  <style>
    body {
      font-family: "Pretendard", sans-serif;
      background: #fffaf8;
      margin: 0;
      overflow: hidden;
      color: #2e2e2e;
    }

    /* Î°úÍ∑∏Ïù∏ */
    #loginSection {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #fff;
      animation: fadeIn 1s ease forwards;
    }

    .loginBox {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #ffffff;
      padding: 40px 50px;
      border-radius: 25px;
      box-shadow: 0 10px 25px rgba(255, 150, 130, 0.25);
    }

    .loginBox h1 {
      color: #ff8e80;
      font-size: 2rem;
      margin-bottom: 30px;
    }

    #userId {
      padding: 12px 20px;
      border-radius: 12px;
      border: 2px solid #ffb6a8;
      font-size: 1rem;
      outline: none;
      width: 230px;
      text-align: center;
    }

    button {
      background: #ff8e80;
      border: none;
      color: white;
      padding: 12px 25px;
      border-radius: 12px;
      margin-top: 20px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }

    button:hover {
      background: #ff7366;
      transform: translateY(-2px);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.97); }
      to { opacity: 1; transform: scale(1); }
    }

    /* ÎåÄÏãúÎ≥¥Îìú */
    #dashboard {
      display: none;
      height: 100vh;
      overflow: hidden;
      background: #fffaf8;
      animation: fadeIn 1s ease forwards;
      position: relative;
    }

    .topBar {
      position: absolute;
      top: 20px;
      right: 30px;
      display: flex;
      align-items: center;
      gap: 15px;
      font-weight: 600;
      color: #444;
      font-size: 1.1rem;
      animation: fadeIn 1s ease forwards 1s;
    }

    .dashboardLayout {
      display: grid;
      grid-template-columns: 1fr 1.1fr 1fr;
      height: 80%;
      gap: 20px;
      padding: 80px 50px 0 50px;
      align-items: center;
    }

    .userSection {
      background: #ffffffb7;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.05);
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .userSection h2 {
      text-align: center;
      color: #ff8e80;
      margin-top: 0;
    }

    /* Ï§ëÏïô ÏÇ¨ÏßÑ */
    .photoBox {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .photoBox img {
      width: 100%;
      max-width: 480px;
      height: 600px;
      border-radius: 20px;
      object-fit: cover;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }

    .photoBox img:hover {
      transform: scale(1.03);
    }

    /* Î°úÍ∑∏ÏòÅÏó≠ */
    .logBox {
      flex: 1;
      overflow-y: auto;
      background: #fffdfb;
      border-radius: 10px;
      padding: 10px;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
      margin-top: 10px;
    }

    textarea {
      width: 100%;
      border-radius: 12px;
      border: 1.5px solid #ffb6a8;
      padding: 10px;
      resize: none;
      outline: none;
      font-size: 0.95rem;
      background: #fffefc;
    }

    .entry {
      background: #fff8f5;
      border-radius: 10px;
      padding: 8px 12px;
      margin-bottom: 8px;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .entry small {
      display: block;
      color: #999;
      font-size: 0.75rem;
      margin-top: 3px;
    }

    /* ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏ */
    .playlistSection {
      width: 100%;
      padding: 15px 60px 25px 60px;
      position: absolute;
      bottom: 0;
      left: 0;
    }

    .playlistSection h3 {
      color: #ff8e80;
      margin-bottom: 10px;
    }

    .playlist {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 12px;
    }

    .songCard {
      background: #fffefc;
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      box-shadow: 0 3px 6px rgba(0,0,0,0.05);
      font-size: 0.85rem;
      position: relative;
      transition: 0.3s;
    }

    .songCard:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 10px rgba(0,0,0,0.1);
    }

    .deleteBtn {
      position: absolute;
      top: 6px;
      right: 8px;
      background: none;
      border: none;
      color: #ff8e80;
      font-size: 1rem;
      cursor: pointer;
    }

    .playlistInput {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .playlistInput input {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: 1.5px solid #ffb6a8;
      outline: none;
    }

    .logoutBtn {
      background: transparent;
      border: 2px solid #ff8e80;
      color: #ff8e80;
      padding: 6px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.2s;
    }

    .logoutBtn:hover {
      background: #ff8e80;
      color: #fff;
    }

    .inputArea {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .inputArea button {
      padding: 10px 15px;
      background: #ff8e80;
      color: white;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <!-- Î°úÍ∑∏Ïù∏ -->
  <section id="loginSection">
    <div class="loginBox">
      <h1>Couple Diary</h1>
      <input id="userId" type="text" placeholder="Enter your ID (Ïòà: SM0710)" />
      <button onclick="login()">Login</button>
    </div>
  </section>

  <!-- ÎåÄÏãúÎ≥¥Îìú -->
  <section id="dashboard">
    <div class="topBar">
      <div id="userNameDisplay"></div>
      <button class="logoutBtn" onclick="logout()">Logout</button>
    </div>

    <div class="dashboardLayout">
      <!-- ÏôºÏ™Ω : Ìà¨Îç∞Ïù¥ Î°úÍ∑∏ -->
      <div class="userSection">
        <h2>Ìà¨Îç∞Ïù¥ Î°úÍ∑∏</h2>
        <div class="inputArea">
          <textarea id="todayInput" placeholder="Ïò§ÎäòÏùò Í∏∞Î°ùÏùÑ ÎÇ®Í≤®Î≥¥ÏÑ∏Ïöî..." rows="2"></textarea>
          <button onclick="addTodayLog()">ÏûÖÎ†•</button>
        </div>
        <div class="logBox" id="todayLogs"></div>
      </div>

      <!-- Ï§ëÏïô : ÏÇ¨ÏßÑ -->
      <div class="photoBox">
        <img id="couplePhoto" src="https://via.placeholder.com/480x600?text=Couple+Photo" alt="Couple Photo" ondblclick="uploadPhoto()" />
      </div>

      <!-- Ïò§Î•∏Ï™Ω : Ï±ÑÌåÖ Î°úÍ∑∏ -->
      <div class="userSection">
        <h2>Ï±ÑÌåÖ Î°úÍ∑∏</h2>
        <div class="inputArea">
          <textarea id="chatInput" placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." rows="2"></textarea>
          <button onclick="addChat()">ÏûÖÎ†•</button>
        </div>
        <div class="logBox" id="chatLogs"></div>
      </div>
    </div>

    <!-- ÏïÑÎûòÏ™Ω : ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏ -->
    <div class="playlistSection">
      <h3>üéµ ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏</h3>
      <div class="playlistInput">
        <input id="playlistInput" placeholder="ÎÖ∏Îûò Ï†úÎ™© ÎòêÎäî ÎßÅÌÅ¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" />
        <button onclick="addSong()">Ï∂îÍ∞Ä</button>
      </div>
      <div class="playlist" id="playlist"></div>
    </div>
  </section>

  <script>
    // Î°úÍ∑∏Ïù∏
    function login() {
      const userId = document.getElementById("userId").value.trim();
      let userName = "";

      if (userId === "SM0710") userName = "ÍπÄÏÜîÏùå üñ§";
      else if (userId === "CY0710") userName = "ÏµúÏöîÏõê üíô";
      else { alert("Îì±Î°ùÎêòÏßÄ ÏïäÏùÄ IDÏûÖÎãàÎã§!"); return; }

      localStorage.setItem("userId", userId);
      localStorage.setItem("userName", userName);

      document.getElementById("loginSection").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      document.getElementById("userNameDisplay").innerHTML = `${userName}`;

      loadData();
    }

    function logout() {
      localStorage.removeItem("userId");
      localStorage.removeItem("userName");
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("loginSection").style.display = "flex";
    }

    function uploadPhoto() {
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "image/*";
      input.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (event) => {
          document.getElementById("couplePhoto").src = event.target.result;
          localStorage.setItem("photo", event.target.result);
        };
        reader.readAsDataURL(file);
      };
      input.click();
    }

    // Ìà¨Îç∞Ïù¥ Î°úÍ∑∏
    function addTodayLog() {
      const input = document.getElementById("todayInput");
      const text = input.value.trim();
      if (!text) return;
      const user = localStorage.getItem("userName");
      const time = new Date().toLocaleString("ko-KR");
      const logs = JSON.parse(localStorage.getItem("todayLogs") || "[]");
      logs.push({ user, text, time });
      localStorage.setItem("todayLogs", JSON.stringify(logs));
      input.value = "";
      renderToday();
    }

    // Ï±ÑÌåÖ Î°úÍ∑∏
    function addChat() {
      const input = document.getElementById("chatInput");
      const text = input.value.trim();
      if (!text) return;
      const user = localStorage.getItem("userName");
      const time = new Date().toLocaleString("ko-KR");
      const chats = JSON.parse(localStorage.getItem("chatLogs") || "[]");
      chats.push({ user, text, time });
      localStorage.setItem("chatLogs", JSON.stringify(chats));
      input.value = "";
      renderChat();
    }

    // Î†åÎçîÎßÅ
    function renderToday() {
      const logs = JSON.parse(localStorage.getItem("todayLogs") || "[]");
      const currentUser = localStorage.getItem("userName");
      const box = document.getElementById("todayLogs");
      box.innerHTML = logs.map((l, i) => `
        <div class="entry">
          ${l.text}
          <small>${l.user} | ${l.time}</small>
          ${l.user === currentUser ? `<button onclick="editToday(${i})">ÏàòÏ†ï</button>` : ""}
        </div>
      `).join("");
    }

    function renderChat() {
      const logs = JSON.parse(localStorage.getItem("chatLogs") || "[]");
      const currentUser = localStorage.getItem("userName");
      const box = document.getElementById("chatLogs");
      box.innerHTML = logs.map((l, i) => `
        <div class="entry">
          ${l.text}
          <small>${l.user} | ${l.time}</small>
          ${l.user === currentUser ? `<button onclick="editChat(${i})">ÏàòÏ†ï</button>` : ""}
        </div>
      `).join("");
    }

    function editToday(i) {
      const logs = JSON.parse(localStorage.getItem("todayLogs") || "[]");
      const currentUser = localStorage.getItem("userName");
      if (logs[i].user !== currentUser) return;
      const newText = prompt("ÏàòÏ†ïÌï† ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî", logs[i].text);
      if (newText !== null) {
        logs[i].text = newText;
        localStorage.setItem("todayLogs", JSON.stringify(logs));
        renderToday();
      }
    }

    function editChat(i) {
      const logs = JSON.parse(localStorage.getItem("chatLogs") || "[]");
      const currentUser = localStorage.getItem("userName");
      if (logs[i].user !== currentUser) return;
      const newText = prompt("ÏàòÏ†ïÌï† ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî", logs[i].text);
      if (newText !== null) {
        logs[i].text = newText;
        localStorage.setItem("chatLogs", JSON.stringify(logs));
        renderChat();
      }
    }

    // ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏
    function addSong() {
      const input = document.getElementById("playlistInput");
      const title = input.value.trim();
      if (!title) return;
      const songs = JSON.parse(localStorage.getItem("playlist") || "[]");
      songs.push({ title });
      localStorage.setItem("playlist", JSON.stringify(songs));
      input.value = "";
      renderPlaylist();
    }

    function deleteSong(i) {
      const songs = JSON.parse(localStorage.getItem("playlist") || "[]");
      songs.splice(i, 1);
      localStorage.setItem("playlist", JSON.stringify(songs));
      renderPlaylist();
    }

    function renderPlaylist() {
      const songs = JSON.parse(localStorage.getItem("playlist") || "[]");
      const box = document.getElementById("playlist");
      box.innerHTML = songs
        .map((s, i) => `
          <div class="songCard">
            ${s.title}
            <button class="deleteBtn" onclick="deleteSong(${i})">√ó</button>
          </div>
        `)
        .join("");
    }

    // Î∂àÎü¨Ïò§Í∏∞
    function loadData() {
      if (localStorage.getItem("photo"))
        document.getElementById("couplePhoto").src = localStorage.getItem("photo");
      renderToday();
      renderChat();
      renderPlaylist();
    }

    window.onload = () => {
      const savedUser = localStorage.getItem("userId");
      if (savedUser) {
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        document.getElementById("userNameDisplay").innerHTML = localStorage.getItem("userName");
        loadData();
      }
    };
  </script>
</body>
</html>
